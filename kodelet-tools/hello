#!/usr/bin/env python3

import sys
import json

def main():
    if len(sys.argv) < 2:
        print("Usage: hello <command>", file=sys.stderr)
        sys.exit(1)

    command = sys.argv[1]

    if command == "description":
        print(json.dumps({
            "name": "hello",
            "description": "Say hello to a person",
            "input_schema": {
                "type": "object",
                "properties": {
                    "name": {"type": "string", "description": "The name of the person"},
                    "age": {"type": "integer", "description": "The age of the person"}
                },
                "required": ["name"]
            }
        }))
    elif command == "run":
        try:
            config = json.loads(sys.stdin.read())
            name = config.get("name", "World")
            age = config.get("age")
            
            if age:
                print(f"Hello, {name}! You are {age} years old.")
            else:
                print(f"Hello, {name}!")
        except Exception as e:
            print(json.dumps({"error": str(e)}), file=sys.stderr)
            sys.exit(1)
    else:
        print(f"Unknown command: {command}", file=sys.stderr)
        sys.exit(1)

if __name__ == "__main__":
    main()